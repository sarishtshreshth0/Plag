<!DOCTYPE html>
<html>
<head>
    <title>Code Plagiarism Detector</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .container { display: flex; gap: 20px; }
        .code-area { flex: 1; }
        textarea { width: 100%; height: 200px; }
        .results { margin-top: 20px; padding: 15px; background: #f5f5f5; }
        .high-similarity { color: red; }
        .medium-similarity { color: orange; }
        .low-similarity { color: green; }
    </style>
</head>
<body>
    <h1>Code Plagiarism Detector</h1>
    <form method="POST">
        <div class="container">
            <div class="code-area">
                <h3>Code 1:</h3>
                <textarea name="code1">{{ code1 }}</textarea>
            </div>
            <div class="code-area">
                <h3>Code 2:</h3>
                <textarea name="code2">{{ code2 }}</textarea>
            </div>
        </div>
        <input type="submit" value="Compare">
    </form>

    {% if similarity_scores %}
    <div class="results">
        <h2>Results:</h2>
        <p><strong>AST Structure Similarity:</strong> {{ similarity_scores.ast_similarity }}%</p>
        <p><strong>Surface Similarity:</strong> {{ similarity_scores.surface_similarity }}%</p>
        <p><strong>CFG Similarity:</strong> {{ similarity_scores.cfg_similarity }}%</p>
        <p><strong>Semantic Similarity:</strong> {{ similarity_scores.semantic_similarity }}%</p>
        <p><strong>Chunk Similarity:</strong> {{ similarity_scores.chunk_similarity }}%</p>
        <p><strong>Combined Similarity Score:</strong> {{ similarity_scores.combined_percentage }}%</p>
        
        <p class="{% if similarity_scores.combined_percentage >= 90 %}high-similarity
                 {% elif similarity_scores.combined_percentage >= 70 %}medium-similarity
                 {% else %}low-similarity{% endif %}">
            <strong>Verdict:</strong> {{ verdict }}
        </p>
        
        {% if detailed_analysis %}
        <div>
            <h3>Detailed Analysis:</h3>
            <p>{{ detailed_analysis }}</p>
        </div>
        {% endif %}
        
        <div class="container">
            <div class="code-area">
                <h3>Normalized Code 1:</h3>
                <pre>{{ normalized1 }}</pre>
            </div>
            <div class="code-area">
                <h3>Normalized Code 2:</h3>
                <pre>{{ normalized2 }}</pre>
            </div>
        </div>
    </div>
    {% endif %}
</body>
</html>
